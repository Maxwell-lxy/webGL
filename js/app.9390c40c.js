(function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,c=1;c<r.length;c++){var s=r[c];0!==n[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],i=r("2877"),c={},s=Object(i["a"])(c,n,o,!1,null,null,null),l=s.exports,u=r("8c4f"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("canvas-wrap",{attrs:{"v-source":e.VS,"f-source":e.FS},on:{onProgramLoaded:e.main,mousedown:e.down,mouseup:e.up,mousemove:e.move}}),e._m(0)],1)},d=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticStyle:{"list-style":"none","text-align":"left"}},[r("li",[e._v("1)⬅➡⬆⬇: 调整角度")]),r("li",[e._v("2)zxcv: 调整手掌、手指角度")]),r("li",[e._v("3)鼠标拖拽旋转")]),r("li",[e._v("4)选中手臂改变颜色")])])}],m=(r("ace4"),r("d3b7"),r("cfc3"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a9"),r("72f7"),r("25f0"),r("159b"),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}});function v(e){var t=e.gl,r=e.type,a=e.source,n=t.createShader(t[r]);return t.shaderSource(n,a),t.compileShader(n),n}function h(e){var t=e.gl,r=e.vSource,a=e.fSource,n=v({type:"VERTEX_SHADER",source:r,gl:t}),o=v({type:"FRAGMENT_SHADER",source:a,gl:t}),i=t.createProgram();return t.attachShader(i,n),t.attachShader(i,o),t.linkProgram(i),t.useProgram(i),t.program=i,i}function g(e){var t=e.gl,r=e.vertices,a=e.program,n=e.verticesInfo,o=e.indices,i=e.isSplitMode,c=void 0!==i&&i;c||(t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)),n.forEach((function(e){var r=e.attrVar,n=e.size,o=e.stride,i=void 0===o?0:o,s=e.offset,l=void 0===s?0:s,u=e.vertice,f=t.getAttribLocation(a,r);c&&(t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW)),t.vertexAttribPointer(f,n,t.FLOAT,!1,i,l),t.enableVertexAttribArray(f),t.bindBuffer(t.ARRAY_BUFFER,null)})),o&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,o,t.STATIC_DRAW))}function b(e){var t=50,r=3e3,a=0;return new Promise((function(n){var o=setInterval((function(){a+=t;var i=e();i?(clearInterval(o),n(i)):a>=r&&(console.error("wait to load: ".concat(e.toString()," 超时!")),clearInterval(o),n(null))}),t)}))}var p="#define GLSLIFY 1\nattribute vec4 a_Position;\nattribute vec4 a_Color;\nattribute vec4 a_Normal;\nuniform mat4 u_NormalMatrix;\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_ModelMatrix;     // Model matrix\nuniform vec3 u_AmbientLightColor; // Color of an ambient light\nuniform vec3 u_LightColor;\nuniform vec3 u_LightDirection;\nuniform vec3 u_LightPosition;   // Position of the light source (in the world coordinate system)\nuniform bool u_Clicked; // Mouse is pressed\nvarying vec4 v_Color;\nvoid main() {\n    gl_Position = u_MvpMatrix * a_Position;\n    vec3 normal = normalize((u_NormalMatrix * a_Normal).xyz);\n    // Calculate the world coordinate of the vertex\n    vec4 vertexPosition = u_ModelMatrix * a_Position;\n    // Calculate the light direction and make it 1.0 in length\n    vec3 lightDirection = normalize(u_LightPosition - vec3(vertexPosition));\n    float nDotL = max(dot(normal, lightDirection), 0.0);\n    // Calculate the color due to diffuse reflection\n    vec3 diffuse = u_LightColor * a_Color.rbg * nDotL;\n    // Calculate the color due to ambient reflection\n    vec3 ambient = u_AmbientLightColor * a_Color.rgb;\n    if (u_Clicked) {  //  Draw in red if mouse is pressed\n        v_Color = vec4(1.0, 0.0, 0.0, 1.0);\n    } else {\n        // Add surface colors due to diffuse and ambient reflection\n        v_Color = vec4(diffuse + ambient, a_Color.a);\n    }\n}\n",_="precision mediump float;\n#define GLSLIFY 1\nvarying vec4 v_Color;\nvoid main() {\n    gl_FragColor = v_Color;\n}",x=r("20e7"),w=r("d4ec"),M=r("bee2"),A=function(){function e(){Object(w["a"])(this,e),this.stack=[]}return Object(M["a"])(e,[{key:"save",value:function(e){this.stack.push(x["a"].clone(e))}},{key:"restore",value:function(){return this.stack.pop()}}]),e}(),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("canvas",e._g({ref:"canvas",attrs:{width:"400",height:"400"}},e.$listeners),[e._v('Please use a browser that supports "canvas"')])])},E=[],P={props:{vSource:{type:String,required:!0},fSource:{type:String,required:!0}},data:function(){return{points:[],gl:null}},methods:{onProgramLoaded:function(e){console.warn(e)},main:function(){var e=this.vSource,t=this.fSource,r=this.$refs.canvas.getContext("webgl2");h({gl:r,vSource:e,fSource:t}),this.gl=r,r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),this.$emit("onProgramLoaded",r)}},mounted:function(){this.main()}},S=P,L=Object(i["a"])(S,y,E,!1,null,null,null),C=L.exports,R={data:function(){var e=x["b"].set(x["b"].create(),20,10,30),t=x["b"].set(x["b"].create(),0,0,0),r=x["b"].set(x["b"].create(),0,1,0),a=x["b"].clone(e),n=x["b"].clone(t),o=x["b"].clone(r);return{matrixCtx:new A,angle:{step:3,arm1:90,joint1:45,joint2:0,joint3:0},matrix:{model:x["a"].create(),mvp:x["a"].create()},VS:p,FS:_,webglInfo:null,curLookAtVec:{vec:"eyeVec3",axis:"x"},eyeVec3:e,atVec3:t,upVec3:r,initUpVec3:o,initAtVec3:n,initEyeVec3:a,near:1,far:300,mouse:{dragging:!1,lastX:-1,lastY:-1,deltaXAngle:0,deltaYAngle:0}}},components:{canvasWrap:C},mounted:function(){var e=this;this.addKeyEvent(),b((function(){return e.webglInfo})).then((function(){e.animate()}))},methods:{checkIsPicked:function(e){var t=e.x,r=e.y,a=e.rect,n=t-a.left,o=a.bottom-r,i=this.webglInfo.gl,c=i.getUniformLocation(i.program,"u_Clicked"),s=!1;i.uniform1i(c,1),this.draw();var l=new Uint8Array(4);return i.readPixels(n,o,1,1,i.RGBA,i.UNSIGNED_BYTE,l),255===l[0]&&(s=!0),i.uniform1i(c,0),s},down:function(e){var t=this.webglInfo.gl,r=e.clientX,a=e.clientY,n=(e.target,t.canvas.getBoundingClientRect()),o=this.checkIsPicked({x:r,y:a,rect:n});if(o){var i=t.getAttribLocation(t.program,"a_Color");t.vertexAttrib3f(i,Math.random(),Math.random(),Math.random())}this.mouse.lastX=r,this.mouse.lastY=a,this.mouse.dragging=!0},up:function(){this.mouse.dragging=!1},move:function(e){var t=e.clientX,r=e.clientY,a=this.mouse,n=a.dragging,o=a.lastX,i=a.lastY,c=this.webglInfo.gl;if(n){var s=100/c.canvas.height,l=s*(t-o),u=s*(r-i);this.mouse.deltaXAngle+=u,this.mouse.deltaYAngle+=l}this.mouse.lastX=t,this.mouse.lastY=r},animate:function(){this.draw(),requestAnimationFrame(this.animate)},addKeyEvent:function(){var e=this;document.addEventListener("keydown",(function(t){t.preventDefault();var r=t.keyCode,a=e.angle,n=e.webglInfo,o=135;switch(r){case 38:a.joint1<o&&(a.joint1+=a.step);break;case 40:a.joint1>-1*o&&(a.joint1-=a.step);break;case 39:a.arm1+=a.step;break;case 37:a.arm1-=a.step;break;case 90:a.joint2+=a.step;break;case 88:a.joint2-=a.step;break;case 86:a.joint3<60&&(a.joint3+=a.step);break;case 67:a.joint3>-60&&(a.joint3-=a.step);break;default:return}e.draw(n)}))},main:function(e){var t=e.getAttribLocation(e.program,"a_Color"),r=e.getUniformLocation(e.program,"u_LightColor"),a=e.getUniformLocation(e.program,"u_LightDirection"),n=e.getUniformLocation(e.program,"u_LightPosition"),o=e.getUniformLocation(e.program,"u_AmbientLightColor"),i=x["b"].normalize(x["b"].create(),x["b"].set(x["b"].create(),.5,3,4));e.vertexAttrib3f(t,1,0,.7),e.uniform3f(o,.2,.2,.2),e.uniform3f(r,1,1,1),e.uniform3fv(a,i),e.uniform3f(n,2.3,4,3.5);var c=new Float32Array([.5,1,.5,-.5,1,.5,-.5,0,.5,.5,0,.5,.5,1,.5,.5,0,.5,.5,0,-.5,.5,1,-.5,.5,1,.5,.5,1,-.5,-.5,1,-.5,-.5,1,.5,-.5,1,.5,-.5,1,-.5,-.5,0,-.5,-.5,0,.5,-.5,0,-.5,.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0,-.5,-.5,0,-.5,-.5,1,-.5,.5,1,-.5]),s=(new Float32Array([1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0,1,.4,0]),new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1])),l=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),u=e.getUniformLocation(e.program,"u_NormalMatrix"),f=e.getUniformLocation(e.program,"u_ModalMatrix"),d=this.eyeVec3,m=this.atVec3,v=this.upVec3,h=e.canvas,b=e.getUniformLocation(e.program,"u_MvpMatrix"),p=x["a"].lookAt(x["a"].create(),d,m,v),_=x["a"].perspective(x["a"].create(),Math.PI/180*50,h.width/h.height,this.near,this.far),w=x["a"].multiply(x["a"].create(),_,p);c.BYTES_PER_ELEMENT;g({gl:e,isSplitMode:!0,program:e.program,verticesInfo:[{attrVar:"a_Position",vertice:c,size:3},{attrVar:"a_Normal",vertice:s,size:3}],indices:l}),e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),this.webglInfo={gl:e,viewProjMatrix:w,u_MvpMatrix:b,u_NormalMatrix:u,u_ModalMatrix:f},this.draw()},draw:function(){var e=this.matrixCtx,t=this.matrix.model,r=this.angle,a=this.webglInfo.gl,n=this.mouse,o=n.deltaXAngle,i=n.deltaYAngle;a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);var c=2;x["a"].fromTranslation(t,x["b"].set(x["b"].create(),0,-12,0)),x["a"].rotateX(t,t,Math.PI/180*o),x["a"].rotateY(t,t,Math.PI/180*i),e.save(t),x["a"].scale(t,t,x["b"].set(x["b"].create(),10,c,10)),this.drawBox({modelMatrix:t}),t=e.restore();var s=10;x["a"].translate(t,t,x["b"].set(x["b"].create(),0,c,0)),x["a"].rotateY(t,t,Math.PI/180*r.arm1),e.save(t),x["a"].scale(t,t,x["b"].set(x["b"].create(),3,s,3)),this.drawBox({modelMatrix:t}),t=e.restore();var l=10;x["a"].translate(t,t,x["b"].set(x["b"].create(),0,s,0)),x["a"].rotateZ(t,t,Math.PI/180*r.joint1),e.save(t),x["a"].scale(t,t,x["b"].set(x["b"].create(),4,l,4)),this.drawBox({modelMatrix:t}),t=e.restore();var u=2;x["a"].translate(t,t,x["b"].set(x["b"].create(),0,l,0)),x["a"].rotateY(t,t,Math.PI/180*r.joint2),e.save(t),x["a"].scale(t,t,x["b"].set(x["b"].create(),2,u,6)),this.drawBox({modelMatrix:t}),t=e.restore(),x["a"].translate(t,t,x["b"].set(x["b"].create(),0,u,0));var f=2;e.save(t),x["a"].translate(t,t,x["b"].set(x["b"].create(),0,0,f)),x["a"].rotateX(t,t,Math.PI/180*r.joint3),x["a"].scale(t,t,x["b"].set(x["b"].create(),1,f,1)),this.drawBox({modelMatrix:t}),t=e.restore(),e.save(t),x["a"].translate(t,t,x["b"].set(x["b"].create(),0,0,-f)),x["a"].rotateX(t,t,-Math.PI/180*r.joint3),x["a"].scale(t,t,x["b"].set(x["b"].create(),1,f,1)),this.drawBox({modelMatrix:t}),t=e.restore()},drawBox:function(e){var t=e.modelMatrix,r=this.webglInfo,a=r.gl,n=r.viewProjMatrix,o=r.u_MvpMatrix,i=r.u_NormalMatrix,c=r.u_ModalMatrix;this.matrix.mvp=m((function(e){return x["a"].multiply(e,n,t)}),(function(){return x["a"].create()}))(),a.uniformMatrix4fv(o,!1,this.matrix.mvp);var s=x["a"].create();x["a"].invert(s,t),x["a"].transpose(s,s),a.uniformMatrix4fv(i,!1,s),a.uniformMatrix4fv(c,!1,t),a.drawElements(a.TRIANGLES,36,a.UNSIGNED_BYTE,0)}}},I=R,j=Object(i["a"])(I,f,d,!1,null,null,null),B=j.exports;a["a"].use(u["a"]);var F=[{path:"/",component:B}],k=new u["a"]({routes:F}),T=k,Y=r("2f62");a["a"].use(Y["a"]);var U=new Y["a"].Store({state:{},mutations:{},actions:{},modules:{}}),O=(r("202f"),r("5efb"));a["a"].use(O["a"]),a["a"].config.productionTip=!1,new a["a"]({router:T,store:U,render:function(e){return e(l)}}).$mount("#app")}});
//# sourceMappingURL=app.9390c40c.js.map